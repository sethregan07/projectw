# VPS Cloning SSH Configuration - World-Class Security
# Best practices for cloning system SSH access

# Global settings for cloning operations
Host cloning-*
    User root
    IdentityFile ~/.ssh/recovery_ed25519
    IdentitiesOnly yes
    StrictHostKeyChecking accept-new
    UserKnownHostsFile ~/.ssh/known_hosts_cloning
    PasswordAuthentication no
    ChallengeResponseAuthentication no
    PubkeyAuthentication yes
    PreferredAuthentications publickey
    ForwardAgent no
    ForwardX11 no
    Compression yes
    CompressionLevel 6
    ControlMaster auto
    ControlPath ~/.ssh/master-%r@%h:%p
    ControlPersist 10m
    ServerAliveInterval 60
    ServerAliveCountMax 3
    TCPKeepAlive yes
    ConnectTimeout 30
    ConnectionAttempts 3
    LogLevel QUIET

# Hetzner Cloud instances
Host hetzner-*
    HostName %h
    User root
    IdentityFile ~/.ssh/recovery_ed25519
    ProxyCommand none
    StrictHostKeyChecking accept-new

# DigitalOcean droplet instances
Host digitalocean-*
    HostName %h
    User root
    IdentityFile ~/.ssh/recovery_ed25519
    ProxyCommand none

# Vultr cloud instances
Host vultr-*
    HostName %h
    User root
    IdentityFile ~/.ssh/recovery_ed25519
    ProxyCommand none

# Linode instances
Host linode-*
    HostName %h
    User root
    IdentityFile ~/.ssh/recovery_ed25519
    ProxyCommand none

# SSH Certificate Authority support (advanced)
Host *.corp
    CertificateFile ~/.ssh/recovery-cert.pub
    IdentityFile ~/.ssh/recovery_ed25519

# Emergency access (read-only)
Host *-emergency
    User monitor
    IdentityFile ~/.ssh/recovery_ed25519
    RequestTTY no
    ForwardAgent no

# Monitoring endpoints (restricted)
Host *-monitor
    User nagios
    IdentityFile ~/.ssh/recovery_ed25519
    RequestTTY no
    PermitLocalCommand no
